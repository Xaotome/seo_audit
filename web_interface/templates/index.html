{% extends "base.html" %}

{% block title %}Accueil - SEO Audit Tool{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8 mx-auto">
        <!-- En-tête -->
        <div class="text-center mb-5">
            <h1 class="display-4 text-primary">
                <i class="fas fa-search me-3"></i>SEO Audit Tool
            </h1>
            <p class="lead text-muted">
                Analysez et optimisez les performances SEO de votre site web
            </p>
        </div>

        <!-- Formulaire principal -->
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">
                    <i class="fas fa-globe me-2"></i>Nouvelle analyse SEO
                </h4>
            </div>
            
            <div class="card-body">
                <form method="POST" action="{{ url_for('start_analysis') }}" id="analysisForm">
                    <!-- URL du site -->
                    <div class="mb-4">
                        <label for="domain" class="form-label">
                            <i class="fas fa-link me-1"></i>URL du site à analyser
                        </label>
                        <input type="url" 
                               class="form-control form-control-lg" 
                               id="domain" 
                               name="domain" 
                               placeholder="https://example.com"
                               required>
                        <div class="form-text">
                            Saisissez l'URL complète de votre site (avec http:// ou https://)
                        </div>
                    </div>

                    <!-- Options avancées -->
                    <div class="accordion mb-4" id="advancedOptions">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingAdvanced">
                                <button class="accordion-button collapsed" type="button" 
                                        data-bs-toggle="collapse" data-bs-target="#collapseAdvanced">
                                    <i class="fas fa-cog me-2"></i>Options avancées
                                </button>
                            </h2>
                            <div id="collapseAdvanced" class="accordion-collapse collapse" 
                                 data-bs-parent="#advancedOptions">
                                <div class="accordion-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="max_pages" class="form-label">
                                                    <i class="fas fa-file-alt me-1"></i>Nombre de pages maximum
                                                </label>
                                                <input type="number" 
                                                       class="form-control" 
                                                       id="max_pages" 
                                                       name="max_pages" 
                                                       value="100" 
                                                       min="1" 
                                                       max="500">
                                            </div>
                                        </div>
                                        
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="rate_limit" class="form-label">
                                                    <i class="fas fa-tachometer-alt me-1"></i>Vitesse (req/s)
                                                </label>
                                                <input type="number" 
                                                       class="form-control" 
                                                       id="rate_limit" 
                                                       name="rate_limit" 
                                                       value="1.0" 
                                                       min="0.1" 
                                                       max="5.0" 
                                                       step="0.1">
                                            </div>
                                        </div>
                                        
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="timeout" class="form-label">
                                                    <i class="fas fa-clock me-1"></i>Timeout (secondes)
                                                </label>
                                                <input type="number" 
                                                       class="form-control" 
                                                       id="timeout" 
                                                       name="timeout" 
                                                       value="15" 
                                                       min="5" 
                                                       max="60">
                                            </div>
                                        </div>
                                        
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <div class="form-check">
                                                    <input class="form-check-input" 
                                                           type="checkbox" 
                                                           id="follow_redirects" 
                                                           name="follow_redirects" 
                                                           checked>
                                                    <label class="form-check-label" for="follow_redirects">
                                                        <i class="fas fa-share me-1"></i>Suivre les redirections
                                                    </label>
                                                </div>
                                                
                                                <div class="form-check">
                                                    <input class="form-check-input" 
                                                           type="checkbox" 
                                                           id="include_images" 
                                                           name="include_images" 
                                                           checked>
                                                    <label class="form-check-label" for="include_images">
                                                        <i class="fas fa-image me-1"></i>Analyser les images
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bouton de soumission -->
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary btn-lg" id="submitBtn">
                            <i class="fas fa-play me-2"></i>Démarrer l'analyse
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Informations sur l'outil -->
        <div class="row mt-5">
            <div class="col-md-4">
                <div class="card h-100 border-0 bg-light">
                    <div class="card-body text-center">
                        <i class="fas fa-search-plus fa-3x text-primary mb-3"></i>
                        <h5>Analyse complète</h5>
                        <p class="text-muted">
                            Analyse approfondie des éléments SEO on-page et techniques
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card h-100 border-0 bg-light">
                    <div class="card-body text-center">
                        <i class="fas fa-chart-line fa-3x text-success mb-3"></i>
                        <h5>Rapports détaillés</h5>
                        <p class="text-muted">
                            Visualisation claire des problèmes et recommandations
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card h-100 border-0 bg-light">
                    <div class="card-body text-center">
                        <i class="fas fa-download fa-3x text-info mb-3"></i>
                        <h5>Export multiple</h5>
                        <p class="text-muted">
                            Téléchargement des résultats en JSON, CSV ou HTML
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.getElementById('analysisForm').addEventListener('submit', function(e) {
    const submitBtn = document.getElementById('submitBtn');
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Démarrage...';
    submitBtn.disabled = true;
});

// Validation de l'URL en temps réel
document.getElementById('domain').addEventListener('input', function(e) {
    const url = e.target.value;
    const submitBtn = document.getElementById('submitBtn');
    
    if (url && !url.match(/^https?:\/\/.+/)) {
        e.target.classList.add('is-invalid');
        submitBtn.disabled = true;
    } else {
        e.target.classList.remove('is-invalid');
        submitBtn.disabled = false;
    }
});
</script>
{% endblock %}